<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<title>test</title>
	<link href="css/index_style.css" rel="stylesheet" type="text/css" />
</head>

<body  onLoad="test()" style="background-image:url(image/background_image.jpg); background-repeat:no-repeat; height: 100%; width: 100%;">

	<img id="head_img" style="float: right; height: 80px; width: 80px; margin-right: 3%" src="image/head.png"
		alt="用户头像" />

	<button id="add_item"
		style="height: 40px; width: 100px; float: right; margin-right: 10px; margin-top: 20px; font-size: 14px"
		onClick="">添加Item</button>

	<h1>WhatsAPP</h1>

	<p style="font-size: 14px; clear: left">一个去中心化的大众评价网站</p>


	<div id="plate">
		<button class="mentor">导师</button>
		<button>电影</button>
	</div>

	<div id="allItems">

		<div id="item1" class="item">
			<div class="item-category"><a>北京大学</a></div>
			<div class="item-belong"><a>软件与微电子学院</a></div>
			<div class="item-name"><a href="">刘一</a></div>
			<div class="item-involve-num">10</div>
			<div class="item-score">8.5</div>
		</div>

		<div id="item2" class="item">
			<div class="item-category"><a>北京大学</a></div>
			<div class="item-belong"><a>软件与微电子学院</a></div>
			<div class="item-name"><a href="">陈二</a></div>
			<div class="item-involve-num">20</div>
			<div class="item-score">8.2</div>
		</div>

		<div id="item3" class="item">
			<div class="item-category"><a>北京大学</a></div>
			<div class="item-belong"><a>软件与微电子学院</a></div>
			<div class="item-name"><a href="">张三</a></div>
			<div class="item-involve-num">30</div>
			<div class="item-score">8.7</div>
		</div>

		<div id="item4" class="item">
			<div class="item-category"><a>北京大学</a></div>
			<div class="item-belong"><a>软件与微电子学院</a></div>
			<div class="item-name"><a href="">李四</a></div>
			<div class="item-involve-num">30</div>
			<div class="item-score">8.7</div>
		</div>

		<div id="item5" class="item">
			<div class="item-category"><a>北京大学</a></div>
			<div class="item-belong"><a>软件与微电子学院</a></div>
			<div class="item-name"><a href="">王五</a></div>
			<div class="item-involve-num">30</div>
			<div class="item-score">8.7</div>
		</div>

		<div id="item6" class="item">
			<div class="item-category"><a>北京大学</a></div>
			<div class="item-belong"><a>软件与微电子学院</a></div>
			<div class="item-name"><a href="">赵六</a></div>
			<div class="item-involve-num">30</div>
			<div class="item-score">8.7</div>
		</div>

		<div id="item7" class="item">
			<div class="item-category"><a>北京大学</a></div>
			<div class="item-belong"><a>软件与微电子学院</a></div>
			<div class="item-name"><a href="">孙七</a></div>
			<div class="item-involve-num">30</div>
			<div class="item-score">8.7</div>
		</div>

		<div id="item8" class="item">
			<div class="item-category"><a>北京大学</a></div>
			<div class="item-belong"><a>软件与微电子学院</a></div>
			<div class="item-name"><a href="">周八</a></div>
			<div class="item-involve-num">30</div>
			<div class="item-score">8.7</div>
		</div>

		<div id="item9" class="item">
			<div class="item-category"><a>北京大学</a></div>
			<div class="item-belong"><a>软件与微电子学院</a></div>
			<div class="item-name"><a href="">吴九</a></div>
			<div class="item-involve-num">30</div>
			<div class="item-score">8.7</div>
		</div>

		<div id="item10" class="item">
			<div class="item-category">北京大学</div>
			<div class="item-belong">软件与微电子学院</div>
			<div class="item-name"><a href="">郑十</a></div>
			<div class="item-involve-num">30</div>
			<div class="item-score">8.7</div>
		</div>

	</div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/web3.min.js"></script>
	<script src="js/truffle-contract.js"></script>
	<script src="js/app.js"></script>
	<script type="text/javascript">
		function test(){
			alert("调用成功");
			var a = {
				category:'北京大学',
				belong:'软件与微电子学院',
				name:'张十一',
				involve_num:'10',
				score:'8'
			}
			generate_one_item(a, 11);
		}
		function generate_items(all_items_json){
			// all_items_json必须为嵌套的JSON格式字符串，必须包括所有的数据，每一个Item的数据格式为{'n':{xxxxx}}
			// n为从零开始的index，后面的"{xxxxx}"为每个Item的具体数据(也必须为JSON格式字符串），详情见generate_one_item函数注释
			var all_items = JSON.parse(all_items_json);
			for(i=0; i<all_items.length; ++i){
				generate_one_item(JSON.parse(all_items.i), i);
			}
		}
		
		function generate_one_item(one_item, index){
			// 传入的参数one_item里面必须有"category","belong","name","name_link","involve_num","score"这几个参数
			// index是当前为json中第几个item，用来设置id
			
			var item = document.createElement('div');
			item.id = 'item' + index;
			item.className = 'item';
			
			var category = document.createElement('div');
			category.className = 'item-category'
			category.innerHTML = one_item.category;
			
			var belong = document.createElement('div');
			belong.className = 'item-belong';
			belong.innerHTML = one_item.belong;
			
			var name = document.createElement('div');
			name.className = 'item-name'
			
			var name_link = document.createElement('a');
			name_link.href = 'detail.html?name=' + one_item.name;	
			name_link.innerHTML = one_item.name;
			//打开detail网页的时候会传入这个老师的姓名，由detail网页内的脚本负责解析并交由合约去获取数据
			name.appendChild(name_link);
			
			var involve_num = document.createElement('div');
			involve_num.className = 'item-involve-num';
			involve_num.innerHTML = one_item.involve_num;
			
			var score = document.createElement('div');
			score.className = 'item-score';
			score.innerHTML = one_item.score;
			
			item.appendChild(category);
			item.appendChild(belong);
			item.appendChild(name);
			item.appendChild(involve_num);
			item.appendChild(score);
			
			var allItems = document.getElementById('allItems');
			allItems.appendChild(item);
		}
	</script>
</body>

</html>